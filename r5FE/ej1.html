<!DOCTYPE html>
<!--
1. Realice la implementación de la funcionalidad del reproductor JavaScript. Mínimo una lista de
archivos, cambiar canción atrás y adelante. Subir y bajar volumen. Modo Shuffle (reproducción
aleatoria).  
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <p id="reproduciendo"></p>
        <div>
            <button type="button"  onclick="CancionA();">Canción Anterior</button>
            <button type="button" id="Stop"  onclick="Stop();">Stop</button>
            <button type="button" id="Play"  onclick="Play();">Play</button>       
            <button type="button" onclick="CancionS()">Canción Siguiente</button>
        </div>
        <div>
            <input type="file" multiple id="Eject"  name="fichero"/>
        </div>
        <div>
            <button type="button"  id="vol_up" onclick="vol_up();">Volume Up</button>
            <button type="button" id="vol_down" onclick="vol_down();">Volume Down</button>
            <button type="button" id="shuttle" onclick="shuttle();">Shuttle</button>
        </div>


        <audio id = "myAudio" onended="siguiente()">
            <!--<source id="vogg" src = "horse.ogg" type = "audio/ogg" >-->
            <source src="" type="audio/mp3">
            <source src="" type="audio/ogg">
            <source src="" type="audio/mpeg">
            <source src="" type="audio/wav">
            Your browser does not support the audio element.
        </audio>

        <script>

            var x = document.getElementById("Eject");
            var f = document.getElementById("myAudio");
            var i = 0;

            function aleatoriza()
            {
                return (Math.random() - 0.5);
            }

            function shuttle()
            {
                play(true);
            }

            function Stop()
            {

                f.pause();
                f.src = "";
                document.getElementById("reproduciendo").innerHTML = "Reproductor Parado";
            }

            function Play(aleatoriza)
            {
                var z;
                if (aleatoriza === false)
                {
                    f.src = x.files[i].name;
                    f.play();
                    document.getElementById("reproduciendo").innerHTML = "Reproduciendo " + x.files[i].name;
                } else
                {
                    z=Math.random() - 0.5;
                    f.src = x.files[i].name;
                    f.play();
                    document.getElementById("reproduciendo").innerHTML = "Reproduciendo " + x.files[i].name;
                }

            }

            function siguiente()
            {
                var x = document.getElementById("Eject");
                if (i < x.files.length)
                {
                    i++;
                    f.src = x.files[i].name;
                    f.play();
                    document.getElementById("reproduciendo").innerHTML = "Reproduciendo " + x.files[i].name;
                }
            }

            function CancionA()
            {
                if (i > 0)
                {
                    i--;
                    this.Play();
                } else
                {
                    document.getElementById("reproduciendo").innerHTML = "No hay mas canciones antes que esta";
                }

            }


            function CancionS()
            {
                if (i < x.files.length - 1)
                {
                    i++;
                    this.Play();
                } else
                {
                    document.getElementById("reproduciendo").innerHTML = "No hay mas canciones despues que esta";
                }

            }

            function vol_up()
            {
                if (document.getElementById('myAudio').volume !== 1.0)
                {
                    document.getElementById('myAudio').volume += 0.1;
                }
            }
            function vol_down()
            {
                if (document.getElementById('myAudio').volume !== 0.0)
                {
                    document.getElementById('myAudio').volume -= 0.1;
                }
            }

        </script>
    </body>
</html>
