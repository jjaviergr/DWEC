<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>        
        <!--<form action=”URL” method=”post” name=”formvalidado” onsubmit=”return validar()”>-->
        <form action="" method="post" onsubmit="return valida()" > 
            <p>
                <label>Nombre:</label>
                <input id="nombre" type="text" name="nombre" value="" size="42" maxlength="30" onblur="validar_nombre();"/> 

                <br>
                <label>Apellidos:</label>
                <input id="apellidos" type="text" name="apellidos" value="" size="40" maxlength="80" onfocus="validar_apellidos();"/> 

                <br>

                <label>Contraseña:</label>
                <input id="pass" type="text" name="pass" value="" size="40" maxlength="80" onfocus="valida_pass();"/> 


                <br>
                <label>fecha</label>
                <input id="fecha" type="date" name="fecha" value="" />  


                <br>                             
                <!-- <input  class="btn" type="submit" name="enviar" value="Enviar " id="btEnviar" /> -->

                <input id="limpiar" type="reset" name="limpiar" value="Borrar"/> 


            </p>
        </form>

        <br>

        <!--onsubmit-->


        <script>
            /*• Contraseña. Para ser segura debe tener:
             • Caracteres alfabéticos (al menos uno).
             • Al menos una mayúscula.
             • Al menos una minúscula.
             • Obligatoriamente al menos un dígito decimal.
             • Obligatoriamente al menos uno de estos caracteres ; (punto y coma) , (coma) .
             (punto) - (guión)
             • Ningún otro carácter distinto a los anteriores.*/
            function valida_pass()
            {
                var v = document.getElementById("pass").value;
               //v="0AAaa;;";
                if ((/[\w;,.-]+/i.test(v)))
                {
                    var tiene_d = false;
                    for (var i = 0; i < 9; i++)
                    {
                        alert(i);
                        if (v.indexOf(i.toString())!==-1)
                            tiene_d = true;
                    }
                    if (tiene_d === true)
                    {
                        //alert("pass bueno");
                        //formatear_nombre();
                        return true;
                    }
                }
                alert("pass malo");
                return false;
            }

            function validar_apellidos()
            {
                var v = document.getElementById("nombre").value;
                if ((/^\D{3,25}$/.test(v)))
                {
                    //alert("nombre bueno");
                    formatear_nombre();
                    return true;
                }
                //alert("nombre malo");
                return false;
            }
            /**/
            function formatear_nombre()
            {
                var n = document.getElementById("nombre").value;

                var cadena1 = n.slice(0, 1).toUpperCase();
                var cadena2 = n.slice(1, n.size).toLowerCase();
                n = cadena1.concat(cadena2);
                alert(n);
                document.getElementById("nombre").value = n;
            }
            function validar_nombre()
            {
                var v = document.getElementById("nombre").value;
                if ((/^\D{3,25}$/.test(v)))
                {
                    alert("nombre bueno");
                    formatear_nombre();
                    return true;
                }
                alert("nombre malo");
                return false;
            }


            function valida()
            {
                var v = new Array();

                valor = document.getElementById("nombre").value;
                if (es_nulo_o_vacio(valor))
                        //if (valor===null || valor.length===0) 
                        {
                            //alert("El campo Nombre no puede estar vacío");
                            v.push(false);
                        } else
                {
                    if (valida_nombre(valor))
                        v.push(true);
                }
                valor = document.getElementById("apellidos").value;
                if (es_nulo_o_vacio(valor))
                {
                    //alert("El campo Apellidos no puede estar vacío");
                    v.push(false);
                } else
                if (valida_nombre(valor))
                    v.push(true);





                valor = document.getElementById("fecha").value;
                if (valor === null || valor.length === 0)
                {
                    //alert("Fecha no puede estar vacio");
                    v.push(false);
                } else
                if (!valida_fecha(valor))
                {

                    v.push(false);
                } else
                    v.push(true);



                var campos = ["nombre", "apellidos", "fecha"];
                /*
                 for(var i=0;i<campos.length;i++)
                 {
                 if (v[i]===false)
                 document.write(campos[i]+" no es valido<br>");
                 }*/
            }


            /*
             
             function valida_nums(valor) 
             {
             //valor = document.getElementById("telefono").value;
             if( isNaN(valor) ) 
             {
             alert("El campo tiene que ser numérico");
             return false;
             }
             return true;
             }
             */



            function validaCheck(elemento)
            {
                //elemento = document.getElementById("campoCondiciones");
                if (!elemento.checked)
                {
                    return false;
                }
                return true;
            }
            // window.addEventListener('load',valida,false);


            function verificaDNI(valor)
            {

                var letras = ['T', 'R', 'W', 'A', 'G', 'M', 'Y', 'F', 'P', 'D', 'X',
                    'B', 'N', 'J', 'Z', 'S', 'Q', 'V', 'H', 'L', 'C', 'K', 'E', 'T'];

                if (!(/^\d{8}[A-Z]$/.test(valor)))
                {
                    return false;
                }
                if (valor.charAt(8) !== letras[(valor.substring(0, 8)) % 23])
                {
                    return false;
                }
                return true;

            }

            function esEmail(valor)
            {

                if ((/\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)/.test(valor)))
                {
                    return false;
                }
                return true;


            }

            function validaTelefono(valor)
            {
                if (/\+?\d{9,12}/.test(valor))
                {
                    return true;
                } else
                {
                    alert("El telefono debe ser formato +00 000000000");
                }
                return false;
            }

            /**/
            function valida_fecha(fecha)
            {
                //alert(fecha);
                //if((/\d{1,2}\/\d{1,2}\/\d{4}/.test(fecha)))
                if ((/\d{4}-\d{1,2}-\d{1,2}/.test(fecha)))
                {
                    return true;
                } else
                {
                    alert("Debes introducir una fecha valida");
                    return false;
                }

            }

            /**/
            function es_nulo_o_vacio(valor)
            {
                if (!(/.+/.test(valor)))
                    return true;
                else
                    return false;

            }
        </script>
    </body>
</html>
